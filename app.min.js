var nb_mines=document.getElementById('mines_game');var pct_mines=document.getElementById('pct_mines_game');var output_num1=document.getElementById('output_num1');var output_num2=document.getElementById('output_num2');var lines_game=document.getElementById('lines_game');var columns_game=document.getElementById('columns_game');var nb_lines_dis=document.getElementById('nb_lines_dis').innerHTML;var nb_columns_dis=document.getElementById('nb_columns_dis').innerHTML??1;var nb_mines_dis=document.getElementById('nb_mines_dis').innerHTML;var img_bg=document.getElementsByClassName('image_background');var i_bg=0;nb_mines.addEventListener('change',()=>{pct_mines.value=Math.round(100*nb_mines.value/(output_num1.innerHTML*output_num2.innerHTML))})
pct_mines.addEventListener('change',()=>{nb_mines.value=Math.round((pct_mines.value/100)*output_num1.innerHTML*output_num2.innerHTML)})
lines_game.addEventListener('change',()=>{pct_mines.value=Math.round(100*nb_mines.value/(output_num1.innerHTML*output_num2.innerHTML))})
columns_game.addEventListener('change',()=>{pct_mines.value=Math.round(100*nb_mines.value/(output_num1.innerHTML*output_num2.innerHTML))})
if(nb_lines_dis!=0&&nb_columns_dis!=0&&nb_mines_dis!=0){var game=new Demineur(nb_lines_dis,nb_columns_dis,nb_mines_dis);game.gridDisplayCreation();game.gridEventsCreation()}
function ajaxGet(url,callback){var req=new XMLHttpRequest();req.open("GET",url);req.addEventListener("load",function(){if(req.status>=200&&req.status<400){callback(req.responseText)}else{console.error(req.status+" "+req.statusText+" "+url)}});req.addEventListener("error",function(){console.error("Erreur rÃ©seau avec l'URL "+url)});req.send(null)}
function getPageUnsplash(){if(typeof(Storage)!=="undefined"){if(sessionStorage.current_page_unsplash){if(Number(sessionStorage.current_page_unsplash)<10){sessionStorage.current_page_unsplash=Number(sessionStorage.current_page_unsplash)+1}else{sessionStorage.current_page_unsplash=1}}else{sessionStorage.current_page_unsplash=1}
return sessionStorage.current_page_unsplash}
return 1}
function bg_display(){try{if(img_bg[i_bg-1].classList.contains('img_bg_display')){img_bg[i_bg-1].classList.remove('img_bg_display')}}catch(err){console.log(err)}
if(i_bg>=img_bg.length){i_bg=0}
img_bg[i_bg].classList.add('img_bg_display');i_bg++}
window.addEventListener('load',()=>{var pageUnsplash=getPageUnsplash();ajaxGet("https://api.unsplash.com/search/photos?client_id=DnOxuuMPIm6X97RqHUf1_oRCoUM7YKJXQ210cbQh2s0&query=alsace&orientation=landscape&page="+pageUnsplash,function(response){listePhotos=JSON.parse(response);for(var i=0;i<10;i++){img_bg[i].setAttribute("src",listePhotos.results[i].urls.full)}});pct_mines.value=Math.round(100*nb_mines.value/(output_num1.innerHTML*output_num2.innerHTML));var game_inner=document.getElementById('game_inner');var taille_actual=document.getElementById('taille_actual');var footer=document.getElementsByTagName('footer');var game_inner_offsetWidth=1;var game_inner_usable_offsetHeight=1;if(game_inner===null){}else{game_inner_offsetWidth=game_inner.offsetWidth;game_inner_usable_offsetHeight=Math.min(game_inner.offsetHeight,game_plan.offsetHeight-taille_actual.offsetHeight-footer[0].offsetHeight)}
var game_inner_side=Math.min(game_inner_offsetWidth,game_inner_usable_offsetHeight);var max_direction=Math.max(nb_lines_dis,nb_columns_dis);$('.game_case').css('width',game_inner_side/max_direction);$('.game_case').css('height',game_inner_side/max_direction);$('.game_case').css('line-height',`${Math.min((game_inner_side / max_direction)-2, 24)}px`);$("#settings_button").click(function(){$("#settings_window").fadeToggle("fast")});$("#settings_button_mobile").click(function(){$("#settings_window").fadeToggle("fast")});$("#close_settings_button").click(function(){$("#settings_window").fadeToggle("fast")});bg_display();setInterval(()=>{bg_display()},3000)})